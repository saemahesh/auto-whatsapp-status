!function(e){"use strict";var t=/\{\{(\d+)\}\}/g,a=document.getElementById("lwNewTemplateData");e("#lwTemplateBody").on("input",(function(){var t=e(this).val();updatePlaceholders(t,"lwTemplateBody","headerTemplate")})),e("#lwAddPlaceHolder").click((function(){addNewPlaceholder("lwTemplateBody","headerTemplate")})),e("#lwHeaderTextBody").on("input",(function(){e(this).val().match(t)?__DataRequest.updateModels({enableHeaderVariableExample:!0}):__DataRequest.updateModels({enableHeaderVariableExample:!1})})),e("#lwAddSinglePlaceHolder").click((function(){var t=e("#lwHeaderTextBody"),a=t.val(),l=t.prop("selectionStart"),r=a.substring(0,l)+" {{1}}"+a.substring(l,a.length);t.val(r),e("#lwHeaderTextBody").trigger("input"),__DataRequest.updateModels({header_text_body:r})})),e("#lwBoldBtn").click((function(){wrapWithItem("*","lwTemplateBody","headerTemplate")})),e("#lwItalicBtn").click((function(){wrapWithItem("_","lwTemplateBody","headerTemplate")})),e("#lwStrikeThroughBtn").click((function(){wrapWithItem("~","lwTemplateBody","headerTemplate")})),e("#lwCodeBtn").click((function(){wrapWithItem("```","lwTemplateBody","headerTemplate")})),window.updatePlaceholders=function(l,r,o){var d=function(t,a){var l=t.match(a),r=[];if(l){e.each(l,(function(t,a){-1===e.inArray(a,r)&&r.push(a)})),r.sort((function(e,t){return Number(e.match(/\d+/)[0])-Number(t.match(/\d+/)[0])}));var o=r.reduce((function(e,t,a){return e[t.match(/\d+/)[0]]=a+1,e}),{});return t.replace(a,(function(e){var t=e.match(/\d+/)[0];return"{{".concat(o[t],"}}")}))}return t}(l,/\{\{\d+\}\}/g);e("#"+r).val(d),document.getElementById(r);var n={},c=d.match(t);if(c)for(var u=0;u<c.length;u++){var i={text_variable:c[u],text_variable_value:c[u]};n[c[u].replace(/\{\{(\d+)\}\}/g,"$1")]=i,"headerTemplate"==o?__DataRequest.updateModels({newBodyTextInputFields:n}):"carouselTemplate"==o?__DataRequest.updateModels({carouselBodyTextVariables:n}):_.isObject(o)&&"carouselCard"==o.type&&(Alpine.$data(a).carouselTemplateContainer[o.index].bodyTextVariables=n)}else"headerTemplate"==o?__DataRequest.updateModels({newBodyTextInputFields:n}):"carouselTemplate"==o?__DataRequest.updateModels({carouselBodyTextVariables:n}):_.isObject(o)&&"carouselCard"==o.type&&(Alpine.$data(a).carouselTemplateContainer[o.index].bodyTextVariables=n)},window.addNewPlaceholder=function(t,l){var r=e("#"+t),o=r.val(),d=r.prop("selectionStart"),n=o.match(/\{\{\d+\}\}/g)||[],c=0;n.forEach((function(e){var t=parseInt(e.match(/\d+/)[0],10);t>c&&(c=t)}));var u=o.substring(0,d),i=o.substring(d,o.length),s=u+" {{".concat(c+1,"}} ")+i;r.val(s);var p=d+" {{".concat(c+1,"}} ").length;r[0].selectionStart=r[0].selectionEnd=p,r.focus(),e("#"+t).trigger("input"),"headerTemplate"==l?__DataRequest.updateModels({text_body:s}):"carouselTemplate"==l?__DataRequest.updateModels({carousel_body_text:s}):_.isObject(l)&&"carouselCard"==l.type&&(Alpine.$data(a).carouselTemplateContainer[l.index].bodyText=s)},window.wrapWithItem=function(t,l,r){var o=e("#"+l),d=o[0].selectionStart,n=o[0].selectionEnd,c=o.val().substring(d,n),u=o.val().substring(0,d)+t+c+t+o.val().substring(n);o.val(u),o[0].selectionStart=o[0].selectionEnd=d+c.length+2,o.focus(),e("#"+l).trigger("input"),"headerTemplate"==r?__DataRequest.updateModels({text_body:u}):"carouselTemplate"==r?__DataRequest.updateModels({carousel_body_text:u}):_.isObject(r)&&"carouselCard"==r.type&&(Alpine.$data(a).carouselTemplateContainer[r.index].bodyText=u)},window.scrollSlide=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=e.closest(".lw-carousel-wrapper").querySelector(".lw-carousel-container"),l=a.querySelectorAll(".lw-carousel-card")[0].offsetWidth+12;a.scrollBy({left:t?l:-l,behavior:"smooth"})},e("#lwCarouselTemplateBody").on("input",(function(){var t=e(this).val();updatePlaceholders(t,"lwCarouselTemplateBody","carouselTemplate")})),e("#lwCarouselAddPlaceHolder").click((function(){addNewPlaceholder("lwCarouselTemplateBody","carouselTemplate")})),e("#lwCarouselBoldBtn").click((function(){wrapWithItem("*","lwCarouselTemplateBody","carouselTemplate")})),e("#lwCarouselItalicBtn").click((function(){wrapWithItem("_","lwCarouselTemplateBody","carouselTemplate")})),e("#lwCarouselStrikeThroughBtn").click((function(){wrapWithItem("~","lwCarouselTemplateBody","carouselTemplate")})),e("#lwCarouselCodeBtn").click((function(){wrapWithItem("```","lwCarouselTemplateBody","carouselTemplate")}))}(jQuery);