# Node.js Service Environment Configuration
# Copy this file to .env and update with your production values

# Application Settings
NODE_ENV=production
PORT=3006

# Laravel Integration
# CRITICAL: Copy the APP_KEY from Source/.env to decrypt Laravel encrypted values
# Format: base64:xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
APP_KEY=

# Database Configuration (MySQL/MariaDB)
# Use the same credentials as your Laravel application in Source/.env
DB_HOST=localhost
DB_PORT=3306
DB_USER=whatapi
DB_PASSWORD=4YJ7ezCXGFDE66Ja
DB_DATABASE=whatapi
DB_CONNECTION_LIMIT=20

# Redis Configuration
# Used for BullMQ job queues
REDIS_HOST=127.0.0.1
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# WhatsApp Cloud API (v23.0 - must match PHP version)
WHATSAPP_API_URL=https://graph.facebook.com/v23.0
WHATSAPP_API_VERSION=v23.0

# Queue Processing Settings
# Webhook queue settings
APP_KEY=base64:ExktIRBYZDy3+mCubhTdhwO/v64GCsK1RuoW4z84LSc=
MAX_CONCURRENT_WEBHOOKS=50    # How many webhooks to process simultaneously
MAX_WEBHOOK_RATE=100          # Max webhooks per second

# Campaign/Message queue settings
MAX_CONCURRENT_MESSAGES=5     # How many messages to send simultaneously
MAX_MESSAGE_RATE=5            # Max messages per second (WhatsApp limit)
# NOTE: CAMPAIGN_BATCH_SIZE is fetched from database configurations table
# (cron_process_messages_per_lot setting - matches PHP behavior)

# Cache Configuration
CACHE_TTL=1800                # Cache TTL in seconds (30 minutes)

# Logging
LOG_LEVEL=info                # Options: error, warn, info, debug
LOG_FILE=logs/app.log

# Request Timeout
HTTP_TIMEOUT=10000            # HTTP request timeout in milliseconds

# NOTE: WEBHOOK_VERIFY_TOKEN is NOT needed!
# The system uses sha1(vendorUid) for verification, same as PHP
# This matches the PHP implementation exactly
